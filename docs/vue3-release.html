<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>çºªå¹´ |ã€ç¬¬ä¸‰æœŸã€‘Vue3 Release æºç è§£è¯»è®°å½• | ç‹å°å£®å£®</title>
    <meta name="description" content="A VitePress site">
    <link rel="preload stylesheet" href="/blog/assets/style.78bb4094.css" as="style">
    <script type="module" src="/blog/assets/app.6342c1db.js"></script>
    <link rel="modulepreload" href="/blog/assets/chunks/framework.4e4e9037.js">
    <link rel="modulepreload" href="/blog/assets/docs_vue3-release.md.8baa9572.lean.js">
    
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
  <meta name="keywords" content="ç‹å°å£®å£®">
  <link rel="icon" href="/favicon.ico">
  <link rel="stylesheet" href="https://lib.baomitu.com/gitalk/1.7.0/gitalk.min.css">
  <script src="https://lib.baomitu.com/gitalk/1.7.0/gitalk.min.js"></script>
  <script src="https://lib.baomitu.com/axios/0.21.1/axios.js"></script>
  <script id="check-dark-light">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
  </head>
  <body>
    <div id="app"><!--[--><div id="containerColor" class="theme" data-v-37a13016><header class="navbar" data-v-37a13016><div data-v-37a13016><div class="flex-grow"></div><nav class="nav-links hide-mobile"><!--[--><!--[--><div class="nav-item"><a class="nav-link" href="/blog/index.html" target="" rel="">ğŸ  é¦–é¡µ <!----></a></div><!--]--><!--[--><div class="nav-item"><a class="nav-link" href="/blog/more/docs.html" target="" rel="">ğŸ“… å½’æ¡£ <!----></a></div><!--]--><!--[--><div class="nav-item"><a class="nav-link" href="/blog/more/tags.html" target="" rel="">ğŸ“‚ åˆ†ç±» <!----></a></div><!--]--><!--[--><div class="nav-item"><a class="nav-link" href="/blog/more/Friendship.html" target="" rel="">ğŸ‘« å‹æƒ…é“¾æ¥ <!----></a></div><!--]--><!--]--><!----><!----></nav><!--[--><!--]--></div><div class="sidebar-button" data-v-37a13016><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div></header><aside class="" data-v-37a13016><!--[--><nav class="nav-links show-mobile"><!--[--><!--[--><div class="nav-item"><a class="nav-link" href="/blog/index.html" target="" rel="">ğŸ  é¦–é¡µ <!----></a></div><!--]--><!--[--><div class="nav-item"><a class="nav-link" href="/blog/more/docs.html" target="" rel="">ğŸ“… å½’æ¡£ <!----></a></div><!--]--><!--[--><div class="nav-item"><a class="nav-link" href="/blog/more/tags.html" target="" rel="">ğŸ“‚ åˆ†ç±» <!----></a></div><!--]--><!--[--><div class="nav-item"><a class="nav-link" href="/blog/more/Friendship.html" target="" rel="">ğŸ‘« å‹æƒ…é“¾æ¥ <!----></a></div><!--]--><!--]--><!----><!----></nav><!--[--><!--]--><ul class="sidebar"><!--[--><!--]--></ul><!--[--><!--]--><!--]--></aside><!----><div class="sidebar-mask" data-v-37a13016></div><main data-v-37a13016><!--[--><div class="content"><!--[--><!--]--><div class="md-header"><div class="md-title">çºªå¹´ |ã€ç¬¬ä¸‰æœŸã€‘Vue3 Release æºç è§£è¯»è®°å½•</div><span id="jinrishici-sentence">æ­£åœ¨åŠ è½½ä»Šæ—¥è¯—è¯....</span><div class="md-date">2021-08-25T00:00:00.000Z</div></div><ul class="catalog"><!--[--><li class="catalog-item"><a class="level level-2" href="#_1-å­¦ä¹ ç›®æ ‡å’Œèµ„æºå‡†å¤‡">1. å­¦ä¹ ç›®æ ‡å’Œèµ„æºå‡†å¤‡</a><!----></li><li class="catalog-item"><a class="level level-2" href="#_2-yarn-workspace">2. Yarn Workspace</a><!----></li><li class="catalog-item"><a class="level level-2" href="#_3-release-js-æ–‡ä»¶è§£è¯»">3. release.js æ–‡ä»¶è§£è¯»</a><!----></li><li class="catalog-item"><a class="level level-2" href="#_4-æ„Ÿæƒ³">4. æ„Ÿæƒ³</a><!----></li><li class="catalog-item"><a class="level level-2" href="#_5-å®è·µ">5. å®è·µ</a><!----></li><!--]--></ul><div style="position:relative;"><div><blockquote><p>ã€è‹¥å·ã€‘Vue3 Release æºç è§£è¯»ï¼š<a href="https://juejin.cn/post/6997943192851054606" target="_blank" rel="noreferrer">https://juejin.cn/post/6997943192851054606</a></p></blockquote><h2 id="_1-å­¦ä¹ ç›®æ ‡å’Œèµ„æºå‡†å¤‡" tabindex="-1">1. å­¦ä¹ ç›®æ ‡å’Œèµ„æºå‡†å¤‡ <a class="header-anchor" href="#_1-å­¦ä¹ ç›®æ ‡å’Œèµ„æºå‡†å¤‡" aria-hidden="true">#</a></h2><p>è¿™ä¸€æœŸé˜…è¯»çš„æ˜¯ Vue3 æºç ä¸­çš„ script/release.js ä»£ç ï¼Œä¹Ÿå°±æ˜¯ Vue.js çš„å‘å¸ƒæµç¨‹ã€‚åœ¨ä¸Šä¸€æœŸæºç é˜…è¯»ä¸­ä» <a href="https://github.com/vuejs/vue-next/blob/master/.github/contributing.md" target="_blank" rel="noreferrer">.github/contributing.md</a> äº†è§£åˆ° Vue.js é‡‡ç”¨çš„æ˜¯ monorepo çš„æ–¹å¼è¿›è¡Œä»£ç çš„ç®¡ç†ã€‚</p><p>monorepo æ˜¯ç®¡ç†é¡¹ç›®ä»£ç çš„ä¸€ä¸ªæ–¹å¼ï¼ŒæŒ‡åœ¨ä¸€ä¸ªé¡¹ç›®ä»“åº“ (repo) ä¸­ç®¡ç†å¤šä¸ªæ¨¡å—/åŒ… (package)ï¼Œä¸åŒäºå¸¸è§çš„æ¯ä¸ª package éƒ½å»ºä¸€ä¸ª repoã€‚</p><p>åˆšå¥½æˆ‘æœ€è¿‘æ­å»ºç»„ä»¶åº“ä¹Ÿæ˜¯ä½¿ç”¨ monorepo çš„æ–¹å¼å»ç®¡ç†åŒ…ã€‚ monorepo æœ‰ä¸ªç¼ºç‚¹ï¼Œå› ä¸ºæ¯ä¸ªåŒ…éƒ½ç»´æŠ¤ç€è‡ªå·±çš„ dependenciesï¼Œé‚£ä¹ˆåœ¨ install çš„æ—¶å€™ä¼šå¯¼è‡´ node_modules çš„ä½“ç§¯éå¸¸å¤§ã€‚ç›®å‰æœ€å¸¸è§çš„ monorepo è§£å†³æ–¹æ¡ˆæ˜¯ä½¿ç”¨ lerna å’Œ yarn çš„ workspaces ç‰¹æ€§å»å¤„ç†ä»“åº“çš„ä¾èµ–ï¼Œæˆ‘æ­å»ºçš„ç»„ä»¶åº“ä¹Ÿæ˜¯ä½¿ç”¨äº† lerna å’Œ yarnã€‚ä½† Vue3 çš„åŒ…ç®¡ç†æ²¡æœ‰ä½¿ç”¨ lernaï¼Œå®ƒæ˜¯æ€ä¹ˆç®¡ç†ä¾èµ–åŒ…çš„ç‰ˆæœ¬å·å‘¢ï¼Ÿè®©æˆ‘ä»¬è·Ÿç€æºç ä¸€æ¢ç©¶ç«Ÿã€‚</p><blockquote><p><a href="https://www.lernajs.cn/" target="_blank" rel="noreferrer">Lerna</a> æ˜¯ä¸€ä¸ªç®¡ç†å·¥å…·ï¼Œç”¨äºç®¡ç†åŒ…å«å¤šä¸ªè½¯ä»¶åŒ…ï¼ˆpackageï¼‰çš„ JavaScript é¡¹ç›®ï¼Œé’ˆå¯¹ä½¿ç”¨ git å’Œ npm ç®¡ç†å¤šè½¯ä»¶åŒ…ä»£ç ä»“åº“çš„å·¥ä½œæµç¨‹è¿›è¡Œä¼˜åŒ–ã€‚</p></blockquote><p><strong>å­¦ä¹ ç›®æ ‡ï¼š</strong></p><p>1ï¼‰å­¦ä¹  release.js æºç ï¼Œè¾“å‡ºè®°å½•æ–‡æ¡£ã€‚</p><p><strong>èµ„æºå‡†å¤‡ï¼š</strong></p><p>Vue3 æºç åœ°å€ï¼š<code>https://github.com/vuejs/vue-next</code></p><h2 id="_2-yarn-workspace" tabindex="-1">2. Yarn Workspace <a class="header-anchor" href="#_2-yarn-workspace" aria-hidden="true">#</a></h2><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">// vue-next/package.json ï¼ˆå¤šä½™çš„ä»£ç å·²çœç•¥ï¼‰</span></span>
<span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">private</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">: </span><span style="color:#FF9CAC;">true</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">version</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">3.2.2</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">workspaces</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">: [</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">packages/*</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#F07178;">    ]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">scripts</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">: </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">release</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">node scripts/release.js</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>Yarn ä» 1.0 ç‰ˆå¼€å§‹æ”¯æŒ Workspace ï¼ˆå·¥ä½œåŒºï¼‰ï¼ŒWorkspace å¯ä»¥æ›´å¥½çš„ç»Ÿä¸€ç®¡ç†æœ‰å¤šä¸ªé¡¹ç›®çš„ä»“åº“ã€‚</p><ul><li>ç®¡ç†ä¾èµ–å…³ç³»ä¾¿æ·ï¼šæ¯ä¸ªé¡¹ç›®ä½¿ç”¨ç‹¬ç«‹çš„ package.json ç®¡ç†ä¾èµ–ï¼Œå¯ä»¥ä½¿ç”¨ yarn å‘½ä»¤ä¸€æ¬¡æ€§å®‰è£…æˆ–è€…å‡çº§æ‰€æœ‰ä¾èµ–ï¼Œæ— éœ€åœ¨æ¯ä¸ªç›®å½•ä¸‹åˆ†åˆ«å®‰è£…ä¾èµ–</li><li>é™ä½ç£ç›˜ç©ºé—´å ç”¨ï¼šå¯ä»¥ä½¿å¤šä¸ªé¡¹ç›®å…±äº«åŒä¸€ä¸ª node_modules ç›®å½•</li></ul><h2 id="_3-release-js-æ–‡ä»¶è§£è¯»" tabindex="-1">3. release.js æ–‡ä»¶è§£è¯» <a class="header-anchor" href="#_3-release-js-æ–‡ä»¶è§£è¯»" aria-hidden="true">#</a></h2><p>å…ˆæ‰‹åŠ¨è·‘ä¸€é <code>yarn run release --dry</code>ï¼Œæ§åˆ¶å°ä¼šè¾“å‡ºä»¥ä¸‹ä¿¡æ¯ï¼ˆå¤šä½™ä¿¡æ¯å·²çœç•¥ï¼‰ï¼Œä»æ§åˆ¶å°æ—¥å¿—çœ‹å‡ºæ¥ï¼Œå‘å¸ƒ Vue.js ä¼šç»å†ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#A6ACCD;">// ç¡®è®¤å‘å¸ƒç‰ˆæœ¬å·</span></span>
<span class="line"><span style="color:#A6ACCD;">? Select release type ... </span></span>
<span class="line"><span style="color:#A6ACCD;">&gt; patch (3.2.3)</span></span>
<span class="line"><span style="color:#A6ACCD;">  minor (3.3.0)</span></span>
<span class="line"><span style="color:#A6ACCD;">  major (4.0.0)</span></span>
<span class="line"><span style="color:#A6ACCD;">  custom</span></span>
<span class="line"><span style="color:#A6ACCD;">// æ‰§è¡Œæµ‹è¯•ç”¨ä¾‹</span></span>
<span class="line"><span style="color:#A6ACCD;">Running tests...</span></span>
<span class="line"><span style="color:#A6ACCD;">// æ›´æ–°ä¾èµ–ç‰ˆæœ¬</span></span>
<span class="line"><span style="color:#A6ACCD;">Updating cross dependencies...</span></span>
<span class="line"><span style="color:#A6ACCD;">// æ‰“åŒ…ç¼–è¯‘æ‰€æœ‰åŒ…</span></span>
<span class="line"><span style="color:#A6ACCD;">Building all packages...</span></span>
<span class="line"><span style="color:#A6ACCD;">// ç”Ÿæˆ changelog</span></span>
<span class="line"><span style="color:#A6ACCD;">conventional-changelog -p angular -i CHANGELOG.md -s</span></span>
<span class="line"><span style="color:#A6ACCD;">// æäº¤ä»£ç </span></span>
<span class="line"><span style="color:#A6ACCD;">Committing changes...</span></span>
<span class="line"><span style="color:#A6ACCD;">// å‘å¸ƒåŒ…</span></span>
<span class="line"><span style="color:#A6ACCD;">Publishing packages...</span></span>
<span class="line"><span style="color:#A6ACCD;">// æ¨é€ä»£ç åˆ° GitHub</span></span>
<span class="line"><span style="color:#A6ACCD;">Pushing to GitHub...</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>åˆæ­¥äº†è§£å‘å¸ƒæµç¨‹åï¼Œæ¥çœ‹çœ‹ release.js æºç åšäº†ä»€ä¹ˆï¼Œå…ˆçœ‹å…¥å£å‡½æ•° main()</p><h3 id="main-å‡½æ•°" tabindex="-1">main å‡½æ•° <a class="header-anchor" href="#main-å‡½æ•°" aria-hidden="true">#</a></h3><p>ä»£ç å¤ªå¤šå°±ä¸è´´ä»£ç äº†ï¼Œè®°å½•ä¸€ä¸‹æ€è·¯å’Œæ€è€ƒ</p><ol><li>ç¡®è®¤è¦å‘å¸ƒçš„ç‰ˆæœ¬ï¼š</li></ol><ul><li><ul><li>å¦‚æœä»å‘½ä»¤è¡Œè·å–åˆ°äº†ç‰ˆæœ¬å·ï¼Œå…ˆéªŒè¯ç‰ˆæœ¬å·è§„èŒƒï¼Œå†æ¬¡ç¡®è®¤ç‰ˆæœ¬å·</li><li>å¦‚æœå‘½ä»¤è¡Œæ²¡æœ‰è¾“å…¥ç‰ˆæœ¬å·ï¼Œä¼šè®©ç”¨æˆ·é€‰æ‹©ä¸€ä¸ªç‰ˆæœ¬å‘å¸ƒ</li></ul></li></ul><p>ç¡®è®¤ç‰ˆæœ¬å·ä½¿ç”¨äº†ä¸€ä¸ªåº“å« <strong>semver</strong>ï¼Œå®ƒçš„ä½œç”¨æ˜¯ç”¨äºç‰ˆæœ¬æ ¡éªŒæ¯”è¾ƒã€‚</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">// ç›®çš„æ˜¯è·å–å‘½ä»¤è¡Œå‚æ•°ï¼ˆä¹Ÿå°±æ˜¯å…è®¸ç”¨æˆ·è‡ªå®šä¹‰è¾“å…¥ç‰ˆæœ¬å·ï¼Œæ¯”å¦‚ yarn release v3.5.0ï¼‰</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> args </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">minimist</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)(process</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">argv</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">slice</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">))</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> targetVersion </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> args</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">_[</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">]</span></span>
<span class="line"></span></code></pre></div><ol start="2"><li>æ‰§è¡Œæµ‹è¯•ç”¨ä¾‹</li></ol><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> execa </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">execa</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> run </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">bin</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">args</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">opts</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{})</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">execa</span><span style="color:#A6ACCD;">(bin</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> args</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">stdio</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">inherit</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">...</span><span style="color:#A6ACCD;">opts </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> bin </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">name</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> path</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">resolve</span><span style="color:#A6ACCD;">(__dirname</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">../node_modules/.bin/</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> name)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;"> (</span><span style="color:#89DDFF;">!</span><span style="color:#A6ACCD;">skipTests </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">!</span><span style="color:#A6ACCD;">isDryRun) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// bin(&quot;jest&quot;) å…ˆè·å– node_modules/.bin/jest çš„ç›®å½•ï¼Œrun çš„æœ¬è´¨å°±æ˜¯æ‰§è¡Œå‘½ä»¤è¡Œ</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// è¿™è¡Œä»£ç çš„æ„æ€å°±ç›¸å½“äºåœ¨å‘½ä»¤ç»ˆç«¯ï¼Œé¡¹ç›®æ ¹ç›®å½•è¿è¡Œ ./node_modules/.bin/jest å‘½ä»¤ã€‚</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">await</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">run</span><span style="color:#F07178;">(</span><span style="color:#82AAFF;">bin</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">jest</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> [</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">--clearCache</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">])</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">await</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">run</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">yarn</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> [</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">test</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">--bail</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">])</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">`</span><span style="color:#C3E88D;">(skipped)</span><span style="color:#89DDFF;">`</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><ol start="3"><li>æ›´æ–°ä¾èµ–ç‰ˆæœ¬</li></ol><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">// 1ï¼‰è·å– packages ç›®å½•ä¸‹çš„æ‰€æœ‰åŒ…</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> packages </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> fs</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">readdirSync</span><span style="color:#A6ACCD;">(path</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">resolve</span><span style="color:#A6ACCD;">(__dirname</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">../packages</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">))</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">filter</span><span style="color:#A6ACCD;">(</span><span style="color:#A6ACCD;font-style:italic;">p</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">!</span><span style="color:#A6ACCD;">p</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">endsWith</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">.ts</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">) </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">!</span><span style="color:#A6ACCD;">p</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">startsWith</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">.</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">))</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 1ï¼‰è·å–åŒ…çš„æ ¹ç›®å½•è·¯å¾„</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> getPkgRoot </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">pkg</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> path</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">resolve</span><span style="color:#A6ACCD;">(__dirname</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">../packages/</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> pkg)</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 2ï¼‰æ›´æ–°æ ¹ç›®å½•å’Œ packages ç›®å½•ä¸‹æ¯ä¸ªåŒ…çš„ package.json çš„ç‰ˆæœ¬å·</span></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">updateVersions</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">version</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{}</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 3ï¼‰å®ç°æ›´æ–° package.json ç‰ˆæœ¬å·çš„ï¼Œä»¥åŠæ›´æ–°ä¾èµ–åŒ…çš„ç‰ˆæœ¬å·</span></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">updatePackage</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">pkgRoot</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">version</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{}</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 4ï¼‰å®ç°æ›´æ–°ä¸ vue ç›¸å…³ä¾èµ–åŒ…çš„ç‰ˆæœ¬å·</span></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">updateDeps</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">pkg</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">depType</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">version</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{}</span></span>
<span class="line"></span></code></pre></div><ol start="4"><li>æ‰“åŒ…ç¼–è¯‘æ‰€æœ‰åŒ…</li></ol><p>è¿™éƒ¨åˆ†æ¶‰åŠå¦å¤–ä¸€ä¸ªæ–‡ä»¶ script/build.jsï¼Œè¿™ä¸ªæ–‡ä»¶ä¸»è¦æ˜¯å°†å„ä¸ªåŒ…æ‰“åŒ…åœ¨å¯¹åº”çš„ç›®å½•ä¸‹ï¼Œæ¯”å¦‚æ‰“åŒ…ä¸€ä¸ªä¾èµ–å°±è¿è¡Œä¸€æ¬¡<code>yarn build</code>ï¼Œå¦‚æœæœ‰å¤šä¸ªåŒ…ï¼Œå°±å¼‚æ­¥å¾ªç¯è°ƒç”¨æ‰“åŒ…å‘½ä»¤ã€‚æ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> * è¿­ä»£æ‰“åŒ…</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">param</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">{</span><span style="color:#FFCB6B;font-style:italic;">*</span><span style="color:#89DDFF;font-style:italic;">}</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#A6ACCD;font-style:italic;">maxConcurrency</span><span style="color:#676E95;font-style:italic;"> æœ€å¤§å¹¶å‘</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">param</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">{</span><span style="color:#FFCB6B;font-style:italic;">*</span><span style="color:#89DDFF;font-style:italic;">}</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#A6ACCD;font-style:italic;">source</span><span style="color:#676E95;font-style:italic;"> ç›®å½•</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">param</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">{</span><span style="color:#FFCB6B;font-style:italic;">*</span><span style="color:#89DDFF;font-style:italic;">}</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#A6ACCD;font-style:italic;">iteratorFn</span><span style="color:#676E95;font-style:italic;"> æ„å»ºå‡½æ•°ï¼ˆæ ¸å¿ƒå°±æ˜¯è¿è¡Œ build å‘½ä»¤ï¼‰</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">returns</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> */</span></span>
<span class="line"><span style="color:#C792EA;">async</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">runParallel</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">maxConcurrency</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">source</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">iteratorFn</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">ret</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> []</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">executing</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> []</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">for</span><span style="color:#F07178;"> (</span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">item</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">of</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">source</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">p</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">resolve</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">iteratorFn</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">item</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">source</span><span style="color:#F07178;">))</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">ret</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">push</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">p</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">maxConcurrency</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">source</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">length</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">e</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">p</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">executing</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">splice</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">executing</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">indexOf</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">e</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">1</span><span style="color:#F07178;">))</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#A6ACCD;">executing</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">push</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">e</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">executing</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">length</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&gt;=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">maxConcurrency</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;font-style:italic;">await</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">race</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">executing</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">all</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">ret</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><ol start="5"><li>ç”Ÿæˆ CHANGELOG æ–‡ä»¶</li></ol><p>ä¸»è¦è¿è¡Œçš„æ˜¯è¿™è¡Œå‘½ä»¤ï¼šconventional-changelog -p angular -i CHANGELOG.md -s</p><ol start="6"><li>æäº¤ä»£ç </li></ol><p>å…ˆæ‰§è¡Œ git diff å‘½ä»¤ï¼Œæ£€æŸ¥æ–‡ä»¶æ˜¯å¦æœ‰ä¿®æ”¹ï¼Œå¦‚æœæœ‰ï¼Œæ‰§è¡Œ git add å’Œ git commit å‘½ä»¤</p><ol start="7"><li>å‘å¸ƒåŒ…</li></ol><p>æœ€åæ‰§è¡Œçš„å‘½ä»¤æ˜¯ï¼Œyarn publishï¼Œå‘å¸ƒæ–°ç‰ˆæœ¬å’Œæ‰“ Tag</p><ol start="8"><li>æ¨é€åˆ° GitHub</li></ol><p>ä¸»è¦è¿è¡Œçš„å‘½ä»¤ï¼š</p><ul><li><ul><li version="">æ‰“ tagï¼šgit tag $</li><li version="">æ¨é€ tagï¼šgit push origin refs/tags/$</li></ul></li><li><ul><li>æäº¤ä»£ç åˆ°è¿œç¨‹ä»“åº“ï¼šgit push</li></ul></li></ul><p>è‡³æ­¤ï¼Œrelease å‘å¸ƒæµç¨‹å·²ç»åˆ†æå®Œäº†ã€‚</p><p><img src="https://cdn.nlark.com/yuque/0/2021/jpeg/1105483/1629654601778-17189d93-a9ad-447f-9ea0-70499c538a0e.jpeg" alt="release å‘å¸ƒæµç¨‹"></p><h2 id="_4-æ„Ÿæƒ³" tabindex="-1">4. æ„Ÿæƒ³ <a class="header-anchor" href="#_4-æ„Ÿæƒ³" aria-hidden="true">#</a></h2><p>å›ç­”ä¸€ä¸‹å¼€ç¯‡çš„é—®é¢˜ï¼ŒVue æ˜¯å¦‚ä½•ç®¡ç†ç‰ˆæœ¬å·å‘¢ï¼Ÿé˜…è¯»å®Œæºç æˆ‘ä»¬ä¼šåˆ†ç°ï¼Œåœ¨å‘ç‰ˆçš„æ—¶å€™ä¼š<strong>ç»Ÿä¸€æ›´æ–°æ‰€æœ‰åŒ…çš„ package.json çš„ç‰ˆæœ¬å·</strong>ã€‚å¯¹æ¯”æˆ‘åœ¨æ­å»ºç»„ä»¶åº“è¿‡ç¨‹ä¸­ä½¿ç”¨çš„ lernaï¼Œå…¶å® lerna æ˜¯æŠŠ release è¿™ä¸€å¥—æµç¨‹å°è£…æˆäº†ä¸€ä¸ªåŒ…ï¼Œå®ƒé‡Œé¢å¤„ç†å‘åŒ…çš„æµç¨‹è·Ÿ Vue Release æµç¨‹åŸºæœ¬æ˜¯ä¸€è‡´çš„ã€‚</p><p>è¿™æ¬¡çš„æºç è§£è¯»è§£ç­”äº†æˆ‘çš„ä¸€äº›ç–‘æƒ‘ã€‚åœ¨æˆ‘æ­å»ºç»„ä»¶åº“çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä¸€å¼€å§‹äº†è§£åˆ°çš„æ˜¯ä¸€ä¸ªç»„ä»¶ä¸€ä¸ªç›®å½•ï¼Œå•åŒ…æ¨é€åˆ° npm ç§åº“ã€‚è¿™æ ·åšçš„ç¼ºç‚¹å¾ˆæ˜æ˜¾ï¼Œéœ€è¦åœ¨æ¯ä¸ªç›®å½•å®‰è£…ä¸€éä¾èµ–ï¼Œå•ç‹¬å¤„ç†ç‰ˆæœ¬å·ã€‚åæ¥äº†è§£åˆ°äº† yarn workspaceï¼ŒçŸ¥é“å®ƒå¯ä»¥å¤„ç†ä¾èµ–å®‰è£…çš„é—®é¢˜ï¼Œä½†ç‰ˆæœ¬å·çš„å¤„ç†è¿˜æ˜¯æ²¡æœ‰è§£å†³æ–¹æ¡ˆã€‚äºæ˜¯æˆ‘å»å¯»æ‰¾ä¸šå†…æ¯”è¾ƒæµè¡Œçš„è§£å†³åŠæ³•ï¼Œå‘ç°å¤§éƒ¨åˆ†æ˜¯ä½¿ç”¨äº† lernaã€‚</p><p>äºæ˜¯æˆ‘å‘æˆ‘çš„ TL æ²Ÿé€šè¯¢é—®ï¼Œå¯å¦é‡‡ç”¨ yarn + lerna çš„æ–¹å¼æ¥æ­å»ºç»„ä»¶åº“ã€‚æˆ‘è®°å¾—ç‰¹åˆ«æ¸…æ¥šä»–åé—®æˆ‘ï¼Œé—®æˆ‘ lerna è§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Œæˆ‘æ”¯æ”¯å¾å¾å›ç­”äº†å®˜ç½‘ä¸Šçš„ä»‹ç»ï¼Œå› ä¸ºæˆ‘å½“æ—¶å¯¹ lerna çš„äº†è§£ä»…åœç•™åœ¨å®˜ç½‘ä»¥åŠå®ƒçš„å¸¸ç”¨å‘½ä»¤ï¼Œå®é™…ä¸Šæˆ‘ä¸çŸ¥é“å®ƒè§£å†³äº†ä»€ä¹ˆé—®é¢˜ã€‚TL è§æˆ‘ç­”ä¸ä¸Šæ¥ï¼Œå›å¤äº†æˆ‘ä¸€å¥ã€å¦‚æ— å¿…è¦ï¼Œå‹¿å¢å®ä½“ã€‘ã€‚</p><p>é€šè¿‡è¿™æ¬¡çš„æºç é˜…è¯»ï¼Œæˆ‘å¯ä»¥å›ç­” TL åé—®æˆ‘çš„é‚£ä¸ªé—®é¢˜äº†ï¼Œlerna è§£å†³çš„æ˜¯å‘åŒ…æµç¨‹ä¸­ç‰ˆæœ¬å·å¤„ç†ï¼Œè‡ªåŠ¨ç”Ÿæˆ CHANGELOG æ–‡ä»¶ï¼Œæäº¤ä»£ç ï¼Œå‘å¸ƒåŒ…ï¼Œæ¨é€åˆ°ä»“åº“è¿™å‡ ä¸ªé—®é¢˜ï¼Œå®ƒæŠŠè¿™å‡ ä¸ªæµç¨‹å°è£…æˆå‘½ä»¤ä¾›ç”¨æˆ·ä½¿ç”¨ã€‚å®ƒä¸æ˜¯æ­å»ºç»„ä»¶åº“éå¿…è¦å¼•å…¥çš„å·¥å…·ï¼Œè™½ç„¶å¼•ç”¨äº† lerna ä¼šå¢åŠ äº†æ–°çš„å¤æ‚åº¦ï¼Œä½†åœ¨ä¸äº†è§£å‘åŒ…æµç¨‹çš„å‰æœŸä½¿ç”¨ lerna å¯ä»¥ä½¿ç»„ä»¶åº“å¼€å‘è€…æ›´ä¸“æ³¨äºç»„ä»¶å¼€å‘çš„å·¥ä½œä¸Šï¼Œè€Œä¸éœ€è¦è¿‡åº¦å…³æ³¨å¦‚ä½•å‘åŒ…ã€‚</p><h2 id="_5-å®è·µ" tabindex="-1">5. å®è·µ <a class="header-anchor" href="#_5-å®è·µ" aria-hidden="true">#</a></h2><p>ç»è¿‡ä¸€ç•ªæ€è€ƒï¼Œæˆ‘è®¤ä¸ºå¼•å…¥ lerna ç¡®å®ç»™ç³»ç»Ÿå¢åŠ äº†ä¸€äº›å¤æ‚åº¦ï¼Œå› ä¸ºå®ƒè¦æ±‚å¼€å‘äººå‘˜é¢å¤–å­¦ä¹  lerna çš„ä¸€äº›çŸ¥è¯†å’Œå‘½ä»¤ï¼Œå¢åŠ äº†å­¦ä¹ æˆæœ¬ä»¥åŠç³»ç»Ÿå¤æ‚åº¦ã€‚æˆ‘è§‰å¾—å¯ä»¥å‚è€ƒ Vue çš„ release.jsï¼Œå†™ä¸€ä¸ªé€‚ç”¨äºé¡¹ç›®çš„æ„å»ºå‘ç‰ˆè„šæœ¬ç”¨æ¥å‘åŒ…ï¼Œé™ä½ç³»ç»Ÿå¤æ‚åº¦ã€‚</p><p>é€»è¾‘ä»£ç åŸºæœ¬ä¸ Vue3 çš„ release.js å’Œ build.js ä¸€è‡´ï¼Œå»æ‰äº†ä¸€äº›æ²¡å¿…è¦çš„ä»£ç ï¼Œæ¯”å¦‚å•å…ƒæµ‹è¯•å’Œä¸€äº›ç¯å¢ƒåˆ¤æ–­ã€‚è¿˜ä¿®æ”¹äº†ä¸€ä¸‹ rollup.config.js çš„é…ç½®ï¼Œæ„Ÿè§‰ç”¨èµ·æ¥ç¡®å®æ¯” lerna å¥½ç”¨ä¸€äº›ã€‚æœ€ç»ˆæ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="/blog/assets/vue3-release0.69de6b0d.png" alt=""></p><div id="gitalk-container"></div></div></div><div class="links-wrapper"><div class="prev-link"><!----></div><div class="next-link"><!----></div></div><div><footer class="page-edit"><!--[--><a href="https://juejin.cn/user/3175045313607534"><img class="imgIcon" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC"></a><!--]--></footer><p class="platform"> ä»¥ä¸Šçš†ä¸º <a href="javascript:;">ç‹å°å£®å£®</a> æ–‡ç« å‘å¸ƒå¹³å° </p><p class="platform"> Copyright Â© 2023-2024 <a href="https://github.com/Wangdelian">@wdl</a></p></div><!--[--><!--]--></div><div style="display:none;" class="imgBox"><img src=""></div><!--]--></main><div class="theme-select" data-v-37a13016><ul data-v-37a13016><li class="active" data-v-37a13016>â˜€ï¸</li><li class="" data-v-37a13016>ğŸŒ‘</li></ul></div></div><!----><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"docs_co2.md\":\"8ad3cbe7\",\"readme.md\":\"16977864\",\"more_docs.md\":\"9d34baf1\",\"index.md\":\"7403bb01\",\"docs_co1.md\":\"09d6d203\",\"more_index.md\":\"532c484a\",\"more_tags.md\":\"03dcbaff\",\"docs_co.md\":\"b7998e15\",\"more_friendship.md\":\"abed8c49\",\"docs_vue3-release.md\":\"8baa9572\",\"docs_launch-editor.md\":\"ec4758a5\",\"docs_vue3-utils.md\":\"2f607009\"}")
__VP_SITE_DATA__ = JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"ç‹å°å£®å£®\",\"description\":\"A VitePress site\",\"base\":\"/blog/\",\"head\":[],\"appearance\":true,\"themeConfig\":{\"displayAllHeaders\":true,\"logo\":\"/favicon.ico\",\"pages\":[{\"frontMatter\":{\"date\":\"2023-03-13\",\"title\":\"ç‹å°å£®å£® |ã€ç¬¬ä¸‰æœŸã€‘ç¬¬ä¸€æ¬¡æ­å»ºåšå®¢è®°å½•\",\"tags\":[\"è®°å½•\",\"æ³¨æ„äº‹é¡¹\"],\"describe\":\"ç¬¬ä¸€æ¬¡æ­å»ºåšå®¢è®°å½•\"},\"regularPath\":\"/docs/co2.html\",\"relativePath\":\"docs/co2.md\"},{\"frontMatter\":{\"date\":\"2023-03-13\",\"title\":\"ç‹å°å£®å£® |ã€ç¬¬äºŒæœŸã€‘ç¬¬ä¸€æ¬¡æ­å»ºåšå®¢è®°å½•\",\"tags\":[\"è®°å½•\",\"æ³¨æ„äº‹é¡¹\"],\"describe\":\"ç¬¬ä¸€æ¬¡æ­å»ºåšå®¢è®°å½•\"},\"regularPath\":\"/docs/co1.html\",\"relativePath\":\"docs/co1.md\"},{\"frontMatter\":{\"date\":\"2023-03-13\",\"title\":\"ç‹å°å£®å£® |ã€ç¬¬äºŒæœŸã€‘ç¬¬ä¸€æ¬¡æ­å»ºåšå®¢è®°å½•\",\"tags\":[\"è®°å½•\",\"æ³¨æ„äº‹é¡¹\"],\"describe\":\"ç¬¬ä¸€æ¬¡æ­å»ºåšå®¢è®°å½•\"},\"regularPath\":\"/docs/co.html\",\"relativePath\":\"docs/co.md\"},{\"frontMatter\":{\"date\":\"2021-08-25\",\"title\":\"çºªå¹´ |ã€ç¬¬ä¸‰æœŸã€‘Vue3 Release æºç è§£è¯»è®°å½•\",\"tags\":[\"æºç \",\"vue3\"],\"describe\":\"Vue3 Release æºç è§£è¯»\"},\"regularPath\":\"/docs/vue3-release.html\",\"relativePath\":\"docs/vue3-release.md\"},{\"frontMatter\":{\"date\":\"2021-08-18\",\"title\":\"çºªå¹´ |ã€ç¬¬äºŒæœŸã€‘Vue3 æºç ä¸­çš„åŸºç¡€å·¥å…·å‡½æ•°\",\"tags\":[\"æºç \",\"vue3\"],\"describe\":\"Vue3 ä¸­çš„å·¥å…·å‡½æ•°æºç è§£è¯»è®°å½•\"},\"regularPath\":\"/docs/vue3-utils.html\",\"relativePath\":\"docs/vue3-utils.md\"},{\"frontMatter\":{\"date\":\"2021-08-11\",\"title\":\"çºªå¹´ |ã€ç¬¬ä¸€æœŸã€‘launch-editor æºç è§£è¯»è®°å½•\",\"tags\":[\"æºç \",\"vue3\"],\"describe\":\"launch-editor æºç è§£è¯»è®°å½•\"},\"regularPath\":\"/docs/launch-editor.html\",\"relativePath\":\"docs/launch-editor.md\"}],\"author\":\"ç‹å°å£®å£®\",\"search\":true,\"nav\":[{\"text\":\"ğŸ  é¦–é¡µ\",\"link\":\"/index\"},{\"text\":\"ğŸ“… å½’æ¡£\",\"link\":\"/more/docs\"},{\"text\":\"ğŸ“‚ åˆ†ç±»\",\"link\":\"/more/tags\"},{\"text\":\"ğŸ‘« å‹æƒ…é“¾æ¥\",\"link\":\"/more/Friendship\"}]},\"locales\":{},\"scrollOffset\":90,\"cleanUrls\":false}")</script>
    
  </body>
</html>